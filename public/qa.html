<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Redirecting to AI Bot...</title>
  <script src="config.js"></script>
</head>
<body>
  <p>Redirecting to AI Bot...</p>

  <script>
    function apiBase() {
      return (window.DOCQA_API_BASE || "").replace(/\/+$/, "");
    }

    const API = apiBase();
    const token = localStorage.getItem("docqa_token");
    const role = localStorage.getItem("shiperp_user_role");

    if (!API) {
      document.body.innerHTML = "<p>Missing DOCQA_API_BASE config.</p>";
    } else if (!token) {
      const r = (role === "internal" || role === "customer") ? role : "customer";
      window.location.href = `login.html?role=${encodeURIComponent(r)}`;
    } else {
      window.location.href = `${API}/sso?token=${encodeURIComponent(token)}`;
    }
  </script>
</body>
</html>
